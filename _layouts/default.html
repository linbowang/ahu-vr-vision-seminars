<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
  <link rel="stylesheet" href="{{ "/assets/css/main.css" | prepend: site.baseurl }}">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
  {% include head-custom.html %}
</head>
<body>
  {% include header.html %}
  
  <main role="main">
    {{ content }}
  </main>
  
  {% include footer.html %}
  
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
  <script src="{{ "/assets/js/main.js" | prepend: site.baseurl }}"></script>
  <script>
    // 初始化Fancybox
    document.addEventListener('DOMContentLoaded', function() {
      // Fancybox全局配置
      Fancybox.bind("[data-fancybox]", {
        // 启用点击空白区域关闭
        clickContent: "close",
        // 启用点击滑动区域关闭
        clickSlide: "close",
        // 显示关闭按钮
        showCloseButton: true,
        // 图片切换效果
        Carousel: {
          transition: "fade"
        },
        // 图像缩放设置
        Image: {
          zoom: true,
        }
      });
      
      // 为.post-content内的所有图片添加Fancybox功能
      const images = document.querySelectorAll('.post-content img');
      images.forEach(img => {
        // 如果图片已经被包裹，则跳过
        if (img.parentNode.tagName === 'A' && img.parentNode.hasAttribute('data-fancybox')) {
          return;
        }
        
        // 创建一个a标签包裹图片
        const link = document.createElement('a');
        link.href = img.src;
        link.setAttribute('data-fancybox', 'meeting-images');
        link.setAttribute('data-caption', img.alt);
        
        // 将图片替换为包裹后的结构
        const parent = img.parentNode;
        parent.insertBefore(link, img);
        link.appendChild(img);
      });
    });
  </script>
</body>
</html>
